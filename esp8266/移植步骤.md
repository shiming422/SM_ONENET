<!--
 * @Author: shiming422 1611813195@qq.com
 * @Date: 2025-11-06 14:28:14
 * @LastEditors: shiming422 1611813195@qq.com
 * @LastEditTime: 2025-11-28 15:49:47
 * @FilePath: \undefinede:\Desktop\MCU_code\shiming422\esp8266\移植步骤.md
 * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
-->
# ESP826601s移植stm32步骤
 ### 一、MQTT固件烧录
![alt text](image.png)
 ### 二、工程部署
 1.cubemx勾选需要的串口，如usart2，并勾选中断和DMA的RX通道 

 2.文件夹中的onenet文件夹添加到keil工程路径中  

 3.在it.h文件中指定的串口中断函数中添加RecvData_Onenet()并且include"Onenet.h"  

 4.在usart.h中#include "stdio.h"  

 5.在main.c中添加#include"Onenet.h"和Onenet_Init()即可  
 
 ### 三、onenet平台要进行的操作
 #### 创建产品
 1.产品开发页面中点击创建产品
 ![alt text](image-1.png)
 （例）2.设置物模型，“添加自定义功能点”
 ![alt text](image-2.png)
 3.必须要发布产品并且在设备管理中添加设备并命名才可以
 #### 重要参数（产品号，产品ID，产品密钥，token生成）
 1.平台直接或间接可查看产品ID和密钥
 2.打开token生成工具和时间戳生成网站(https://tool.lu/timestamp/)
 - **时间戳** 此刻应该取用未来时间 
 - **token** 填入已获取的参数
 ![alt text](image-4.png)
 - **Onenet.h**中
 ![alt text](image-5.png)
 完成此步即可将设备连接到onenet
 ### 三、数据上传和下发（如前期进行链接验证并且属性没有设置完毕，则此时应撤销发布并进行属性的更改）
 #### 数据上传